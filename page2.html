<!DOCTYPE html>
<html>
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-P4ZGD289Y7"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-P4ZGD289Y7');
        
        // 记录进入时间
        sessionStorage.setItem('page2_enter', Date.now());
    </script>
    <title>介紹頁面</title>
</head>
<body>
    <h1>我們的網站</h1>
    <button type="button" onclick="handleNext()">率先體驗</button>

    <script>
        // 发送停留时间事件
        function trackPage2Stay() {
            const staySeconds = (Date.now() - parseInt(sessionStorage.getItem('page2_enter'))) / 1000;
            gtag('event', 'page2_stay', {
                'stay_seconds': staySeconds,
                'page_path': '/page2.html'
            });
        }

        // 按钮点击事件
        function handleNext() {
            // 先发送停留时间
            trackPage2Stay();
            
            // 发送按钮点击事件
            gtag('event', 'page2_button_click', {
                'click_timestamp': Date.now(),
                'button_name': '率先體驗'
            });
            
            // 跳转到第三页
            window.location.href = 'page3.html';
        }

        // 页面关闭时补发停留时间
        window.addEventListener('beforeunload', trackPage2Stay);
    </script>
</body>
</html>