<!DOCTYPE html>
<html>
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-P4ZGD289Y7"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-P4ZGD289Y7');
        
        // 记录进入时间
        sessionStorage.setItem('page1_enter', Date.now());
    </script>
    <title>註冊頁面</title>
</head>
<body>
    <h1>歡迎註冊</h1>
    <form id="signupForm">
        <input type="email" placeholder="電子郵件" required>
        <button type="button" onclick="handleSignup()">登錄/註冊</button>
    </form>

    <script>
        // 发送停留时间事件
        function trackPage1Stay() {
            const staySeconds = (Date.now() - parseInt(sessionStorage.getItem('page1_enter'))) / 1000;
            gtag('event', 'page1_stay', {
                'stay_seconds': staySeconds,
                'page_path': '/page1.html'
            });
        }

        // 按钮点击事件
        function handleSignup() {
            // 先发送停留时间
            trackPage1Stay();
            
            // 发送按钮点击事件
            gtag('event', 'page1_button_click', {
                'click_timestamp': Date.now(),
                'button_name': '登錄/註冊'
            });
            
            // 跳转到第二页
            window.location.href = 'page2.html';
        }

        // 页面关闭时补发停留时间
        window.addEventListener('beforeunload', trackPage1Stay);
    </script>
</body>
</html>